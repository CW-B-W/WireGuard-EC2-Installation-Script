###### This project is mostly generated by DeepSeek v3

# WireGuard VPN Installation Script on EC2 (Amazon Linux)

[WireGuard VPN on EC2 (Amazon Linux)](https://hackmd.io/@CW-B-W/ByiKDFq8Jl)

This project contains a simplified WireGuard VPN installation script for AWS EC2 (Amazon Linux).  
It uses a simple configuration file for IP, port, DNS, and users.

## Security Group Configuration

Before running the script, you need to configure the EC2 Security Group to allow incoming traffic on the WireGuard port.

1.  **Open the EC2 Management Console**:
    -   Navigate to the EC2 service in the AWS Management Console.
2.  **Select Security Groups**:
    -   In the left navigation pane, click on "Security Groups".
3.  **Select Your Instance's Security Group**:
    -   Choose the security group associated with your EC2 instance.
4.  **Edit Inbound Rules**:
    -   Click on "Edit inbound rules".
5.  **Add a Custom UDP Rule**:
    -   Click on "Add rule".
    -   Select "Custom UDP" from the "Type" dropdown.
    -   Enter the WireGuard port number (e.g., `51820`) in the "Port Range" field.
    -   Set the "Source" to "Anywhere" or your specific IP range.
    -   Click "Save rules".
6.  **(Optional) Add an ICMP Rule**:
    -   If you want to allow ICMP (ping) traffic, add another rule.
    -   Click on "Add rule".
    -   Select "All ICMP - IPv4" from the "Type" dropdown.
    -   Set the "Source" to "Anywhere" or your specific IP range.
    -   Click "Save rules".

## Files

- `wireguard_config.conf`: Configuration file for the WireGuard server.
- `install_wireguard.sh`: Installation script that reads the configuration file and sets up the WireGuard server.
- `README.md`: This file.

## How to Use

0. **SSH into your EC2 instance**:
    - ssh
        ```bash
        ssh -i /path/to/wireguard-key.pem ec2-user@<your-ec2-public-ip>
        ```

1.  **Clone the Repository**:
    -   Clone the repository to your local machine:
        ```bash
        git clone https://github.com/CW-B-W/WireGuard-EC2-Installation-Script.git
        ```
2.  **Edit the Configuration File**:
    -   Edit `wireguard_config.conf` if neccessary:
        ```ini
        # WireGuard Server Configuration
        ServerIP = 10.0.0.1/24
        ListenPort = 51820
        DNS = 8.8.8.8

        # List of Users (one per line)
        Users = client1, client2
        ```
    -   Modify the `ServerIP`, `ListenPort`, `DNS`, and `Users` values as needed.

3.  **Run the Script**:
    -   Make the script executable:
        ```bash
        chmod +x install_wireguard.sh
        ```
    -   Run the script:
        ```bash
        sudo ./install_wireguard.sh
        ```

4.  **Get Client Configurations**:
    -   After the script completes, use `sudo cat /etc/wireguard/clients/client1.conf` (replace `client1` with the actual client name) to print the client configuration file.
    -   Manually copy the output and add it to your WireGuard client.

5.  **Connect**:
    -   Connect to the VPN using the configuration you added to your WireGuard client.
